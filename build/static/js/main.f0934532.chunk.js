(this["webpackJsonppuzzle-game"]=this["webpackJsonppuzzle-game"]||[]).push([[0],{19:function(t,e,n){},20:function(t,e,n){},28:function(t,e,n){"use strict";n.r(e);var s=n(0),c=n.n(s),a=n(6),o=n.n(a),i=(n(19),n(8)),r=n(3),l=n(2),u=(n(20),n.p+"static/media/fruit.367f788c.svg"),f=n.p+"static/media/play1.25977739.svg",d=n.p+"static/media/jacket.a286bec7.svg",b=n(1),j=c.a.forwardRef((function(t,e){var n=function(e){var n=e.target,s=Number(n.innerText);t.rightAnswer===s?(n.style.background="#90f73b",t.onClick(s,n)):(n.style.background="#f94e4e",t.onClick(s)),setTimeout((function(){n.style.removeProperty("background")}),700)};return Object(b.jsx)("div",{className:"num-rows",ref:e,children:function(){for(var t=[],e=1;e<=8;e++)t.push(Object(b.jsx)("div",{className:"btn-num",onClick:n,children:e},e));return t}()})})),m=n(14),x=n.n(m),y=function(t){var e=t.position,n=t.slot,s=Math.min(window.outerWidth,window.innerWidth);n&&(e=function(){var t=7,c=66;return s<=768&&(t=1,c=61),Object(r.a)(Object(r.a)({},e),{},{x:n.offsetLeft-t,y:n.offsetTop-c})}());var c=Object(b.jsxs)("div",{className:"button-cont",children:[Object(b.jsx)("div",{className:"button-img"}),Object(b.jsx)("div",{className:"button-sewed"}),Object(b.jsx)("div",{className:"button-green"})]});if(t.draggable)return Object(b.jsx)(x.a,{onStart:t.onStart,onDrag:t.onDrag,onStop:t.onStop,disabled:t.disabled,position:e,children:Object(b.jsx)("div",{className:"button-plate plate".concat(t.index," ").concat(t.disabled?"matched":""),children:c})});var a=t.rightAnswer===e.slot,o={transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)"),cursor:a?"pointer":"default"},i="button-plate plate".concat(t.index," ");return t.disabled&&(i+=" matched ".concat(t.className)),Object(b.jsx)("div",{className:i,style:o,"data-slot-id":e.slot,onClick:function(e){var n=e.target.closest(".button-plate");a&&(n.classList.add("green"),t.onClick(e))},children:c})},v=function(){var t=Object(s.useState)([]),e=Object(l.a)(t,2),n=e[0],c=e[1],a=Object(s.useState)(null),o=Object(l.a)(a,2),m=o[0],x=o[1],v=Object(s.useState)([]),O=Object(l.a)(v,2),g=O[0],h=O[1],p=Object(s.useState)([]),L=Object(l.a)(p,2),T=L[0],w=L[1],N=Object(s.useState)(!1),S=Object(l.a)(N,2),k=S[0],C=S[1],R=Object(s.useState)(null),E=Object(l.a)(R,2),B=E[0],D=E[1],z=Object(s.useState)(1),A=Object(l.a)(z,2),F=A[0],P=A[1],W=Object(s.useState)(null),H=Object(l.a)(W,2),I=H[0],J=H[1],M=Object(s.useState)(!1),G=Object(l.a)(M,2),q=G[0],K=G[1],Q=Object(s.useState)(!1),U=Object(l.a)(Q,2),V=U[0],X=U[1],Y=Object(s.useState)(!1),Z=Object(l.a)(Y,2),$=Z[0],_=Z[1],tt=Object(s.useState)(!1),et=Object(l.a)(tt,2),nt=et[0],st=et[1],ct=Object(s.useState)(null),at=Object(l.a)(ct,2),ot=at[0],it=at[1],rt=Object(s.useRef)(null),lt=Object(s.useRef)(null),ut=Object(s.useRef)(null),ft=Object(s.useRef)(null),dt=Object(s.useRef)(null),bt=Object(s.useRef)(null),jt=Object(s.useRef)(null),mt=Object(s.useRef)(null),xt=Object(s.useRef)(null),yt=Object(s.useState)([{x:986,y:80,slot:0},{x:686,y:160,slot:0},{x:786,y:240,slot:0},{x:900,y:360,slot:0},{x:934,y:200,slot:0},{x:986,y:400,slot:0},{x:700,y:400,slot:0},{x:840,y:120,slot:0}]),vt=Object(l.a)(yt,2),Ot=vt[0],gt=vt[1],ht=Object(s.useState)(window.outerWidth),pt=Object(l.a)(ht,2),Lt=pt[0],Tt=pt[1];Object(s.useEffect)((function(){window.addEventListener("resize",(function(){Tt(Math.min(window.outerWidth,window.innerWidth))}))}),[]),Object(s.useEffect)((function(){var t=[{x:986,y:80,slot:0},{x:686,y:160,slot:0},{x:786,y:240,slot:0},{x:900,y:360,slot:0},{x:934,y:200,slot:0},{x:986,y:400,slot:0},{x:700,y:400,slot:0},{x:840,y:120,slot:0}];if(Lt<=1024&&(t=[{x:660,y:80,slot:0},{x:622,y:160,slot:0},{x:706,y:240,slot:0},{x:600,y:260,slot:0},{x:534,y:200,slot:0},{x:492,y:95,slot:0},{x:438,y:45,slot:0},{x:465,y:212,slot:0}]),Lt<=768){var e=Lt/100*75,n=Lt/100*54;t=[{x:e+10,y:15,slot:0},{x:e+40,y:90,slot:0},{x:e+20,y:n+100,slot:0},{x:e+40,y:350,slot:0},{x:185,y:n+50,slot:0},{x:10,y:n+95,slot:0},{x:100,y:n+45,slot:0},{x:300,y:n+60,slot:0}]}t.forEach((function(t,e){t.slot=Ot[e].slot})),console.log(t),gt((function(){return t}))}),[Lt]),Object(s.useEffect)((function(){5===g.length&&(k||(C(!0),g.map((function(t){var e=t.classList.toString().match(/plate[0-9]/)[0].match(/[0-9]/)[0],n=Ot[e-1],s=10;Lt<=1024&&(s=5),Lt<=768&&(s=2);var c=Object(r.a)(Object(r.a)({},n),{},{y:n.y-(n.slot-1)*s});return gt((function(t){return t[e-1]=c,t})),t.style.transitionDuration="1000ms",t.style.trasitionDelay="500ms",setTimeout((function(){t.style.removeProperty("transition-duration")}),1e3),null})),Ht(),setTimeout((function(){Wt("How many buttons?"),Mt()}),500)))}),[g]),Object(s.useEffect)((function(){q&&(B?At():B||$||setTimeout((function(){Ft()}),500))}),[B]),Object(s.useEffect)((function(){V&&(setTimeout((function(){jt.current.firstChild.classList.remove("rotate"),jt.current.firstChild.classList.add("shake")}),2e3),setTimeout((function(){X(!1),K(!1)}),4e3))}),[V]);var wt=function(t){!t||n.length>4||c((function(e){return e.push(t),e}))},Nt=function(t){var e=!0;return g.forEach((function(n){n.classList.contains("plate".concat(t))&&(e=!1)})),e},St=function(t){var e=!1;return T.forEach((function(n){n.classList.contains("slot".concat(t))&&(e=!0)})),e},kt=function(t){t.target.closest(".button-plate").style.cursor="grabbing"},Ct=function(t){var e=t.target.closest(".button-plate");ot?e=ot:it(e),n.map((function(t){return t.style.background="#00000000",null})),Et(e),m&&(m.style.background="#00000050")},Rt=function(t){var e=ot||t.target.closest(".button-plate"),n=e.classList.toString().match(/plate[0-9]/)[0].match(/[0-9]/)[0];if(m){var s=Number(m.classList.toString().match(/slot[0-9]/)[0].match(/[0-9]/)[0]);e.style.cursor="default",m.style.background="#00000000";var c=7,a=66;Lt<=768&&(c=1,a=61);var o={x:m.offsetLeft-c,y:m.offsetTop-a,slot:s};gt((function(t){return t[n-1]=o,t})),h((function(t){return[].concat(Object(i.a)(t),[e])})),w((function(t){return[].concat(Object(i.a)(t),[m])}))}else e.style.cursor="grab",e.style.transitionDuration="1000ms",setTimeout((function(){e.style.removeProperty("transition-duration")}),1e3);it(null),x(null)},Et=function(t){var e=Qt(t.getBoundingClientRect()),s=Object(i.a)(null!==n&&void 0!==n?n:[]),c=!1;s.forEach((function(t){if(!t.classList.contains("matched")){var n=Qt(t.getBoundingClientRect());return Bt(e,n)&&Dt(e,n)?(c=!0,void x(t)):(c||x(null),null)}}))},Bt=function(t,e){return e.x<t.x&&e.x+40>t.x||e.x>t.x&&e.x-40<t.x},Dt=function(t,e){return e.y>t.y&&e.y-40<t.y||e.y<t.y&&e.y+40>t.y},zt=function(t){Jt(),setTimeout((function(){ft.current.classList.add("green"),Wt("How many green buttons?")}),500),setTimeout((function(){Kt(),Mt()}),500)},At=function(){var t=dt.current,e=rt.current;t.innerText=I.innerText;var n=I.getBoundingClientRect(),s=e.getBoundingClientRect();t.style.transform="translate(".concat(n.x-s.x,"px, ").concat(n.y,"px)"),t.style.opacity=1,setTimeout((function(){var e=ft.current.getBoundingClientRect(),n=0;Lt<=1024&&(n=Lt/100);var c=e.width/1.3+(s.x-e.x)+n,a=e.y+10;t.style.transition="transform 1000ms",t.style.transform="translate(".concat(c,"px, ").concat(a,"px)")}),500),setTimeout((function(){Gt()}),2e3),setTimeout((function(){Pt()}),2500)},Ft=function(){Ht(),Gt(),It(),_(!0)},Pt=function(){st(!0),Ht(),Kt(),Gt(),dt.current.innerText&&dt.current.classList.add("fade-out"),g.map((function(t,e){return t.classList.add("fade-out"),null})),setTimeout((function(){X(!0)}),500),setTimeout((function(){window.location.reload()}),4e3)},Wt=function(t){var e=ft.current;e.innerText=t,e.style.animationDuration="1s",e.classList.remove("fade-out"),e.classList.add("fade-in")},Ht=function(){var t=ft.current;t.classList.remove("fade-in"),t.classList.add("fade-out")},It=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;setTimeout((function(){var e=n[t].getBoundingClientRect(),s=rt.current.getBoundingClientRect(),c=mt.current,a=20,o=10;o=Lt<=1024?6:o,a=Lt<=768?-30:a,o=Lt<=768?0:o;var i=e.left-s.left-144-a,r=e.top-t*o;r=Lt>=768?r:r+(e.height-29)/2,c.style.left=i+"px",c.style.top=r+"px",c.style.display="block",c.classList.remove("fade-out"),c.classList.add("fade-in")}),500)},Jt=function(){setTimeout((function(){var t=mt.current;t.classList.remove("fade-in"),t.classList.add("fade-out"),setTimeout((function(){t.style.display="none"}),500)}),500)},Mt=function(){var t=bt.current;t.style.display="flex",t.classList.remove("fade-out-bottom"),t.classList.add("fade-in-bottom")},Gt=function(){var t=bt.current;setTimeout((function(){t.classList.remove("fade-in-bottom"),t.classList.add("fade-out-bottom")}),500),setTimeout((function(){t.style.display="none"}),900)},qt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=xt.current;e.innerText="".concat(t," button").concat(t>1?"s":""),e.classList.remove("fade-out"),e.classList.add("fade-in")},Kt=function(){var t=xt.current;t.classList.remove("fade-in"),t.classList.add("fade-out")},Qt=function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}};return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("div",{className:"play-button-wall",ref:lt}),Object(b.jsx)("div",{className:"play-button",onClick:function(){var t=lt.current,e=ut.current;t.classList.add("fade-out"),e.classList.add("fade-out"),setTimeout((function(){t.style.display="none",e.style.display="none"}),500),K(!0)},ref:ut,children:Object(b.jsx)("img",{src:f,alt:"",className:"img"})}),Object(b.jsxs)("div",{className:"board ".concat(k?"all-matched":""),ref:rt,children:[Object(b.jsx)("div",{ref:ft,className:"header",children:"Sew the buttons on the jacket"}),Object(b.jsx)("div",{className:"jacket",children:Object(b.jsx)("img",{src:d,alt:""})}),function(){for(var t=[],e=1;e<=5;e++)t.push(Object(b.jsx)("div",{ref:wt,className:"slot slot".concat(e," ").concat(St(e)?"matched":"")},e));return t}(),function(){for(var t=[],e=1;e<=8;e++){var s=!Nt(e),c=q&&!1!==B,a=Ot[e-1],o=a.slot>0?n[a.slot-1]:null;t.push(Object(b.jsx)(y,{draggable:c,onStart:kt,onDrag:Ct,onStop:Rt,disabled:s,position:a,slot:o,rightAnswer:F,onClick:zt,className:nt?"fade-out":"",index:e},e))}return t}(),Object(b.jsx)(j,{rightAnswer:$?F:5,onClick:function(t,e){if(null===B)return D((function(e){return 5===t})),void J(e);if($||5!==t){if(t===F){if(P((function(t){return t+1})),qt(F),5!==t)return Gt(),void It(F);Ht(),setTimeout((function(){ft.current.classList.remove("green"),Wt("How many buttons?")}),600),_(!1)}}else setTimeout((function(){Pt()}),500)},ref:bt}),Object(b.jsx)("div",{ref:dt,className:"right-answer"}),Object(b.jsxs)("div",{ref:mt,className:"hint-wrong",children:[Object(b.jsx)("div",{className:"content",children:"Tap to color"}),Object(b.jsx)("div",{className:"corner"})]}),Object(b.jsx)("div",{className:"hint-label",ref:xt}),V&&Object(b.jsx)("div",{className:"end-animation",children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"title",children:"Great!"}),Object(b.jsx)("div",{className:"fruit bounce-left-right",ref:jt,children:Object(b.jsx)("img",{src:u,alt:"Fruit",className:"rotate"})}),Object(b.jsx)("div",{className:"mask"})]})})]})]})},O=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(e){var n=e.getCLS,s=e.getFID,c=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),s(t),c(t),a(t),o(t)}))};o.a.render(Object(b.jsx)(v,{}),document.getElementById("root")),O()}},[[28,1,2]]]);
//# sourceMappingURL=main.f0934532.chunk.js.map