(this["webpackJsonppuzzle-game"]=this["webpackJsonppuzzle-game"]||[]).push([[0],{19:function(t,e,n){},20:function(t,e,n){},28:function(t,e,n){"use strict";n.r(e);var s=n(1),c=n.n(s),a=n(5),o=n.n(a),i=(n(19),n(7)),r=n(10),u=n(2),l=(n(20),n.p+"static/media/fruit.367f788c.svg"),d=n(0),f=c.a.forwardRef((function(t,e){var n=function(e){var n=e.target,s=Number(n.innerText);t.rightAnswer===s?(t.onClick(s,n),n.style.background="#90f73b"):(n.style.background="#f94e4e",t.onClick(s)),setTimeout((function(){n.style.removeProperty("background")}),700)};return Object(d.jsx)("div",{className:"num-rows",ref:e,children:function(){for(var t=[],e=1;e<=8;e++)t.push(Object(d.jsx)("div",{className:"btn-num",onClick:n,children:e},e));return t}()})})),b=n(14),j=n.n(b),m=function(t){if(t.draggable)return Object(d.jsx)(j.a,{onStart:t.onStart,onDrag:t.onDrag,onStop:t.onStop,disabled:t.disabled,position:t.position,onClick:t.onClick,children:Object(d.jsx)("div",{className:"button-plate plate".concat(t.index," ").concat(t.disabled?"matched":""),children:Object(d.jsxs)("div",{className:"button-cont",children:[Object(d.jsx)("div",{className:"button-img"}),Object(d.jsx)("div",{className:"button-sewed"}),Object(d.jsx)("div",{className:"button-green"})]})})});var e=t.rightAnswer===t.position.slot,n={transform:"translate(".concat(t.position.x,"px, ").concat(t.position.y,"px)"),cursor:e?"pointer":"default"},s="button-plate plate".concat(t.index," ");return t.disabled&&(s+=" matched ".concat(t.className)),Object(d.jsx)("div",{className:s,style:n,"data-slot-id":t.position.slot,onClick:function(n){var s=n.target.closest(".button-plate");e&&(s.classList.add("green"),t.onClick(n))},children:Object(d.jsxs)("div",{className:"button-cont",children:[Object(d.jsx)("div",{className:"button-img"}),Object(d.jsx)("div",{className:"button-sewed"}),Object(d.jsx)("div",{className:"button-green"})]})})},v=function(){var t=Object(s.useState)([]),e=Object(u.a)(t,2),n=e[0],c=e[1],a=Object(s.useState)(null),o=Object(u.a)(a,2),b=o[0],j=o[1],v=Object(s.useState)([]),O=Object(u.a)(v,2),x=O[0],g=O[1],h=Object(s.useState)([]),y=Object(u.a)(h,2),p=y[0],L=y[1],N=Object(s.useState)(!1),T=Object(u.a)(N,2),S=T[0],k=T[1],C=Object(s.useState)(null),w=Object(u.a)(C,2),R=w[0],B=w[1],D=Object(s.useState)(1),E=Object(u.a)(D,2),A=E[0],F=E[1],P=Object(s.useState)(null),z=Object(u.a)(P,2),H=z[0],I=z[1],J=Object(s.useState)(!1),G=Object(u.a)(J,2),W=G[0],q=G[1],K=Object(s.useState)(!1),M=Object(u.a)(K,2),Q=M[0],U=M[1],V=Object(s.useState)(!1),X=Object(u.a)(V,2),Y=X[0],Z=X[1],$=Object(s.useState)(!1),_=Object(u.a)($,2),tt=_[0],et=_[1],nt=Object(s.useRef)(null),st=Object(s.useRef)(null),ct=Object(s.useRef)(null),at=Object(s.useRef)(null),ot=Object(s.useRef)(null),it=Object(s.useRef)(null),rt=Object(s.useRef)(null),ut=Object(s.useState)([{x:986,y:80,slot:0},{x:686,y:160,slot:0},{x:786,y:240,slot:0},{x:900,y:360,slot:0},{x:934,y:200,slot:0},{x:986,y:400,slot:0},{x:700,y:400,slot:0},{x:840,y:120,slot:0}]),lt=Object(u.a)(ut,2),dt=lt[0],ft=lt[1],bt=null;Object(s.useEffect)((function(){5===x.length&&(S||(k(!0),x.map((function(t){var e=t.classList.toString().match(/plate[0-9]/)[0].match(/[0-9]/)[0],n=dt[e-1],s=Object(r.a)(Object(r.a)({},n),{},{y:n.y-10*(n.slot-1)});return ft((function(t){return t[e-1]=s,t})),t.style.transitionDuration="1000ms",t.style.trasitionDelay="500ms",setTimeout((function(){t.style.removeProperty("transition-duration")}),1e3),null})),Ct(),setTimeout((function(){kt("How many buttons?"),Bt()}),500)))}),[x]),Object(s.useEffect)((function(){W&&(R?Nt():R||Y||setTimeout((function(){Tt()}),500))}),[R]),Object(s.useEffect)((function(){Q&&(setTimeout((function(){ot.current.firstChild.classList.remove("rotate"),ot.current.firstChild.classList.add("shake")}),2e3),setTimeout((function(){U(!1),q(!1)}),4e3))}),[Q]);var jt=function(t){!t||n.length>4||c((function(e){return e.push(t),e}))},mt=function(t){var e=!0;return x.forEach((function(n){n.classList.contains("plate".concat(t))&&(e=!1)})),e},vt=function(t){var e=!1;return p.forEach((function(n){n.classList.contains("slot".concat(t))&&(e=!0)})),e},Ot=function(t){t.target.closest(".button-plate").style.cursor="grabbing"},xt=function(t){bt=bt||t.target.closest(".button-plate"),n.map((function(t){return t.style.background="#00000000",null})),ht(bt),b&&(b.style.background="#00000050")},gt=function(t){var e=bt||t.target.closest(".button-plate"),n=e.classList.toString().match(/plate[0-9]/)[0].match(/[0-9]/)[0];if(b){var s=Number(b.classList.toString().match(/slot[0-9]/)[0].match(/[0-9]/)[0]);e.style.cursor="default",b.style.background="#00000000";var c={x:b.offsetLeft-17,y:b.offsetTop-78,slot:s};ft((function(t){return t[n-1]=c,t})),g((function(t){return[].concat(Object(i.a)(t),[e])})),L((function(t){return[].concat(Object(i.a)(t),[b])}))}else e.style.cursor="grab",e.style.transitionDuration="1000ms",setTimeout((function(){e.style.removeProperty("transition-duration")}),1e3);bt=null,j(null)},ht=function(t){var e=Ft(t.getBoundingClientRect()),s=Object(i.a)(null!==n&&void 0!==n?n:[]),c=!1;s.forEach((function(t){if(!t.classList.contains("matched")){var n=Ft(t.getBoundingClientRect());return yt(e,n)&&pt(e,n)?(c=!0,void j(t)):(c||j(null),null)}}))},yt=function(t,e){return e.x<t.x&&e.x+40>t.x||e.x>t.x&&e.x-40<t.x},pt=function(t,e){return e.y>t.y&&e.y-40<t.y||e.y<t.y&&e.y+40>t.y},Lt=function(t){Rt(),setTimeout((function(){st.current.classList.add("green"),kt("How many green buttons?")}),500),setTimeout((function(){At(),Bt()}),500)},Nt=function(){var t=ct.current,e=nt.current;t.innerText=H.innerText;var n=H.getBoundingClientRect(),s=e.getBoundingClientRect();t.style.transform="translate(".concat(n.x-s.x,"px, ").concat(n.y,"px)"),t.style.opacity=1,setTimeout((function(){var e=st.current.getBoundingClientRect(),n=e.width/1.55+e.x,s=e.y+10;t.style.transition="transform 1000ms",t.style.transform="translate(".concat(n,"px, ").concat(s,"px)")}),500),setTimeout((function(){Dt()}),2e3),setTimeout((function(){St()}),2500)},Tt=function(){Ct(),Dt(),wt(),Z(!0)},St=function(){et(!0),Ct(),At(),Dt(),ct.current.classList.add("fade-out"),x.map((function(t,e){return t.classList.add("fade-out"),null})),setTimeout((function(){U(!0)}),500)},kt=function(t){var e=st.current;e.innerText=t,e.style.animationDuration="1s",e.classList.remove("fade-out"),e.classList.add("fade-in")},Ct=function(){var t=st.current;t.classList.remove("fade-in"),t.classList.add("fade-out")},wt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;setTimeout((function(){var e=n[t].getBoundingClientRect(),s=it.current,c=e.top-10*t,a=e.left-s.offsetWidth-e.width-180;s.style.left=a+"px",s.style.top=c+"px",s.style.display="block",s.classList.remove("fade-out"),s.classList.add("fade-in")}),500)},Rt=function(){setTimeout((function(){var t=it.current;t.classList.remove("fade-in"),t.classList.add("fade-out"),setTimeout((function(){t.style.display="none"}),500)}),500)},Bt=function(){var t=at.current;t.style.display="flex",t.classList.remove("fade-out-bottom"),t.classList.add("fade-in-bottom")},Dt=function(){var t=at.current;setTimeout((function(){t.classList.remove("fade-in-bottom"),t.classList.add("fade-out-bottom")}),500),setTimeout((function(){t.style.display="none"}),900)},Et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=rt.current;e.innerText="".concat(t," button").concat(t>1?"s":""),e.classList.remove("fade-out"),e.classList.add("fade-in")},At=function(){var t=rt.current;t.classList.remove("fade-in"),t.classList.add("fade-out")},Ft=function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}};return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("button",{style:{position:"absolute"},onClick:function(){q(!0)},children:"start"}),Object(d.jsxs)("div",{className:"board ".concat(S?"all-matched":""),ref:nt,children:[Object(d.jsx)("div",{ref:st,className:"header",children:"Sew the buttons on the jacket"}),Object(d.jsx)("div",{className:"jacket"}),function(){for(var t=[],e=1;e<=5;e++)t.push(Object(d.jsx)("div",{ref:jt,className:"slot slot".concat(e," ").concat(vt(e)?"matched":"")},e));return t}(),function(){for(var t=[],e=1;e<=8;e++){var n=!mt(e),s=W&&!1!==R;t.push(Object(d.jsx)(m,{draggable:s,onStart:Ot,onDrag:xt,onStop:gt,disabled:n,position:dt[e-1],rightAnswer:A,onClick:Lt,className:tt?"fade-out":"",index:e},e))}return t}(),Object(d.jsx)(f,{rightAnswer:Y?A:5,onClick:function(t,e){if(null===R)return B((function(e){return 5===t})),void I(e);if(Y||5!==t){if(t===A){if(F((function(t){return t+1})),Et(A),5!==t)return Dt(),void wt(A);Ct(),setTimeout((function(){st.current.classList.remove("green"),kt("How many buttons?")}),600),Z(!1)}}else setTimeout((function(){St()}),500)},ref:at}),Object(d.jsx)("div",{ref:ct,className:"right-answer"}),Object(d.jsxs)("div",{ref:it,className:"hint-wrong",children:[Object(d.jsx)("div",{className:"content",children:"Tap to color"}),Object(d.jsx)("div",{className:"corner"})]}),Object(d.jsx)("div",{className:"hint-label",ref:rt}),Q&&Object(d.jsx)("div",{className:"end-animation",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"title",children:"Great!"}),Object(d.jsx)("div",{className:"fruit bounce-left-right",ref:ot,children:Object(d.jsx)("img",{src:l,alt:"Fruit",className:"rotate"})}),Object(d.jsx)("div",{className:"mask"})]})})]})]})},O=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(e){var n=e.getCLS,s=e.getFID,c=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),s(t),c(t),a(t),o(t)}))};o.a.render(Object(d.jsx)(v,{}),document.getElementById("root")),O()}},[[28,1,2]]]);
//# sourceMappingURL=main.5d97bece.chunk.js.map